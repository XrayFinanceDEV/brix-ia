---
// Nessun frontmatter necessario
---
<div
  id="cookie-banner"
  class="fixed bottom-0 left-0 right-0 bg-gray-900/80 text-white text-xs p-8 z-50"
>
  <div class="max-w-4xl mx-auto relative">
    <!-- Pulsante di chiusura: X in un rettangolo con bordo grigio chiaro e sfondo trasparente -->
    <div class="flex justify-end">
        <button
        id="cookie-close"
        class="flex items-center justify-center w-6 h-6 border border-gray-300 bg-transparent hover:bg-gray-600 hover:text-white text-gray-300 text-xl rounded"
        aria-label="Chiudi"
        >
        &times;
        </button>
    </div>
    <p>
      Noi e terze parti selezionate utilizziamo cookie o tecnologie simili per
      finalità tecniche e, con il tuo consenso, anche per le finalità di esperienza
      e misurazione come specificato nella cookie policy.
      Puoi liberamente prestare, rifiutare o revocare il tuo consenso, in qualsiasi
      momento, accedendo al pannello delle preferenze. Il rifiuto del consenso può
      rendere non disponibili le relative funzioni.
      Usa il pulsante “Accetta” per acconsentire. Chiudi questa informativa per
      continuare senza accettare.
    </p>
    <div class="mt-4 flex space-x-2">
      <button
        id="cookie-accept"
        class="bg-lime-500 hover:bg-lime-600 text-white px-4 py-2 rounded"
      >
        Accetta
      </button>
      <!-- Bottone Privacy che rimanda a /privacy -->
      <a
        href="/privacy"
        class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"
      >
        Privacy
      </a>
    </div>
  </div>
</div>

<script type="module">
  import { checkConsent, setCookieConsent } from '/src/utils/cookieConsent';

  document.addEventListener('DOMContentLoaded', () => {
    checkConsent();
    const acceptButton = document.getElementById('cookie-accept');
    const closeButton = document.getElementById('cookie-close');

    if (acceptButton) {
      acceptButton.addEventListener('click', () => setCookieConsent(true));
    }
    if (closeButton) {
      closeButton.addEventListener('click', () => setCookieConsent(false));
    }
  });
</script>
